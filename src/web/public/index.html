<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Processing Engine - Dashboard</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Exo+2:wght@400;600&family=Inter:wght@400;500;600&display=swap"
        rel="stylesheet">
    <script src="/socket.io/socket.io.js"></script>
    <script src="app.js" defer></script>
</head>

<body class="dark-theme">
    <div class="app-container">
        <header class="main-header">
            <div class="logo">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round">
                    <polygon points="5 3 19 12 5 21 5 3"></polygon>
                </svg>
                <span>Video Engine</span>
            </div>
            <div class="server-status">
                <span class="status-indicator active"></span>
                Running
            </div>
        </header>

        <main class="dashboard-grid">
            <section class="card queue-summary">
                <h2>Queue Status</h2>
                <div class="stats-row">
                    <div class="stat-item">
                        <span class="stat-label">Pending</span>
                        <span class="stat-value" id="pending-count">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Processing</span>
                        <span class="stat-value processing" id="processing-status">Idle</span>
                    </div>
                </div>
            </section>

            <section class="card search-section">
                <h2>Batch Search (Check DB)</h2>
                <div class="search-container">
                    <textarea id="search-input" placeholder="Enter IDs or Filenames...
Supports: comma, space, or new lines.
Example:
VDO-001, VDO-002
VDO-003"></textarea>
                    <button id="search-btn" class="btn-primary">Check Availability</button>
                </div>
                <div id="search-results" class="search-results hidden">
                    <div class="result-col">
                        <h3>Found <span id="found-count" class="badge success">0</span></h3>
                        <ul id="found-list"></ul>
                    </div>
                    <div class="result-col">
                        <h3>Missing <span id="missing-count" class="badge danger">0</span></h3>
                        <ul id="missing-list"></ul>
                    </div>
                </div>
            </section>

            <section class="card recent-activity">
                <div class="card-header">
                    <h2>Current Queue</h2>

                    <div class="queue-controls" style="display:flex; gap:10px; align-items:center;">
                        <input type="text" id="queue-search" placeholder="Search..."
                            style="padding: 6px; border-radius: 4px; border: 1px solid #444; background: #222; color: #fff;">
                        <select id="queue-status"
                            style="padding: 6px; border-radius: 4px; border: 1px solid #444; background: #222; color: #fff;">
                            <option value="pending">Pending</option>
                            <option value="processing">Processing</option>
                            <option value="completed">Completed</option>
                            <option value="failed">Failed</option>
                            <option value="all">All</option>
                        </select>
                    </div>

                    <div class="pagination-controls">
                        <select id="rows-per-page">
                            <option value="50">50 / page</option>
                            <option value="100">100 / page</option>
                            <option value="200">200 / page</option>
                        </select>
                        <div class="page-nav">
                            <button id="prev-page" disabled>&lt; Prev</button>
                            <span id="page-indicator">Page 1</span>
                            <button id="next-page" disabled>Next &gt;</button>
                        </div>
                    </div>
                </div>
                <div class="table-responsive">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th class="sortable" data-sort="original_name">Name <span class="sort-indic"></span>
                                </th>
                                <th class="sortable" data-sort="cleaned_name">Category <span class="sort-indic"></span>
                                </th>
                                <th class="sortable" data-sort="file_size">Size <span class="sort-indic"></span></th>
                                <th class="sortable" data-sort="duration_sec">Duration <span class="sort-indic"></span>
                                </th>
                                <th class="sortable" data-sort="resolution">Res <span class="sort-indic"></span></th>
                                <th class="sortable" data-sort="video_encoder">Codec <span class="sort-indic"></span>
                                </th>
                                <th class="sortable" data-sort="video_status">Status <span class="sort-indic"></span>
                                </th>
                                <th class="sortable" data-sort="created_at">Added <span class="sort-indic">â†“</span></th>
                            </tr>
                        </thead>
                        <tbody id="queue-list">
                            <!-- Dynamic Rows -->
                        </tbody>
                    </table>
                </div>
            </section>
        </main>
    </div>
</body>

</html>